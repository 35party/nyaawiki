# HamsterEcoHelper 插件指南

HamsterEcoHelper（仓鼠症插件）是为促进服务器经济流动的辅助性插件。

源码、文档及反馈 [戳这里](https://github.com/NyaaCat/HamsterEcoHelper)。

!> 最近，HamsterEcoHelper 进行了一次重构，大量命令的使用方法发生了变化，且可能依然存在一些问题。请诸位积极反馈自己遇到的问题。

!>**注意：如果购买/拍到物品时背包已满，物品将会保存至末影箱中，末影箱已满将会保存至临时储存，需要使用 `/h storage` 查看、获取物品。**

## 征购

### 玩家发起征购

拿起希望征购的物品，使用命令 `/h req [数量（整数）] [单价（整数）]` 可发起征购。  

可用短命令 `/hreq [数量（整数）] [单价（整数）]` 替代。

?> :information_source: **示例**  
以单价 1 节操征购 100 个白色羊毛，可以用 `/hreq 100 1`。

你拥有的节操余额必须至少为 **货款总额**；你的背包空间须足以存储这些物品。发起征购后会将这些节操暂存在系统，物品会直接存入你的背包。  
征购结束后，如果还有剩余的节操会退回你的账户。

### 玩家响应征购

出现 `[征购]` 提示时，可以使用 `/h sell [数量]` 将手中指定数量的符合要求的物品卖出，响应征购。  
若「数量」**不填**（即 `/h sell`），则视为全部卖出，直至征购量已满为止。

也可以短命令 `/hsell [数量]` 代替。

## 拍卖

### 玩家发起拍卖

手中拿着要竞拍的物品（可堆叠），执行 `/h auc [起步价（整数）] [步进价（整数）] [保留价（整数、可选）]`。

用短命令 `/hauc [起步价（整数）] [步进价（整数）] [保留价（整数、可选）]`，可快速发起拍卖。

如果成功卖出，买家获得该物品并支付相应的节操，系统则征收 10% 的消费税，也就是买家最终会支付出价节操的 **110%**；而卖家可以获得完整的出价节操。  
如因未能达到保留价，或者无人竞拍而流拍，物品会退回你的背包。

?> :information_source: **示例**  
要拍卖钻石 2 颗，则在手中拿着 2 颗；希望以**总价** 100 节操起步，每次出价至少比上次高 10 节操，敲 `/hauc 100 10` 即可。  
如果还希望成交价最低 150 节操，则使用 `/hauc 100 10 150`。

### 玩家竞价

出现`[拍卖]`提示时可以使用 `/h bid [价格]` 来出价。  
若「价格」**不填**，或填写`min`（即`/h bid`），可跟进当前允许的最低出价。

短命令 `/hbid [价格]` 可快速出价。

## 世界商店

在喵窝，世界商店称为「天喵商城」。在世界任意角落可随时访问。

### 浏览及购买商品

`/h m` 或 `/hm` 可打开天喵商城；  
点击物品可购买一个，按住 Shift 单击则购买整格物品。

### 出售物品

使用`/h m [单价]` 或 `/hm [单价]`，可将手中物品**全部**上架至天喵商城。

!>**请注意**  天喵商城每次上架物品将收取 39 节操的摊位费，每次交易收取 8% 税，摊位租金为 1 节操 / 个 / 天。

## 木牌商店

天喵商城的木牌商店结合了线下商店的优势（较低的税率、无放置保管上架费用等），多种功能（销售、收购、抽奖）和网络技术（同类型木牌内容同步），开设和维护商店都变得更加简单。每一位玩家的同类型木牌将拥有一致的内容。不需要费劲维护大一堆的木牌，只需要编辑一个商店，其他同类型的商店都会同步更新。

### 规则与限制

- 玩家可以创建 8 个木牌；
- 玩家在自己的销售区可以使用 128 个物品槽（slot）。
- Lotto 木牌的物品不占用槽的空间，但是每个 Lotto 木牌会占用一个木牌的限制。
- Lotto 木牌必须在说明部分或附近牌子注明抽奖物品和中奖率。不合格的木牌或虚标中奖率的木牌将被强制退回交易。
- 合法的 Lotto 木牌交易结果自负，交易前请三思。
- 交易消费税 2%。

### 开始销售

首先创建一个牌子，然后准星对着牌子，使用命令 `/h shop create sell`，即可创建销售木牌。

准星对着牌子，手里拿着要上架的物品，敲 `/h shop sell [单价]`，手中物品将**全部**上架。

?> :information_source: **示例**  
手中拿着 64 个石头，每个石头 9 节操的价格销售，则 `/h shop sell 9`

### 开始收购

首先创建一个牌子，然后准星对着牌子，使用命令 `/h shop create buy`，即可创建销售木牌。

然后要选择一个箱子作为收购物品的存储。准星对着想要使用的箱子，使用命令 `/h chest req`，即可设置收购存储箱。

接下来手中拿着要收购的物品，准星对着收购木牌，敲 `/h shop buy [单价]`。例如 9 节操每个收购石头，则手中拿着石头然后敲 `/h shop buy 9`

如果忘记自己的存储箱在哪里，命令 `/h shop storage info`。

### 购买商品与响应收购

* 右键点击「出售」牌子即可打开商店界面。单击购买一个，按住 Shift 单击则购买一整个槽。
* 右键点击「收购」牌子可查询该木牌所收购的物品明细。
* 手持相应物品，对准该木牌**左键**点击，即可出售给收购方。

每次交易均加征 2% 消费税。

### 抽奖

首先创建一个牌子，然后准星对着牌子，使用命令 `/h shop create buy [单价]`，即可创建销售木牌。

然后要选择一个装有抽奖物品的箱子。准星对着想要使用的箱子，使用命令 `/h chest lotto`，即可设置乐透箱。

玩家右键点击 Lotto 木牌即会支付一次交易的费用随机获得箱子中的一个槽的物品。

## 展示框商店

展示框商店可以展示店内随机物品，每个物品只能在一个展示框里展示。如果是堆叠物品，一次交易只购买一个，且原物品不消失（可继续购买）。

### 设置方法

首先创建一个物品展示框，然后准星对准展示框，使用命令 `/h frame set` 即可设置为展示框商店。

使用 `/h frame remove` 可以移除展示框商店。

### 搜索

现已支持在喵窝世界范围内搜索天喵木牌商店的物品。

#### 用法

`/h search 关键词 [选项:值]`

#### 可用选项

* `i` 或 `item`：物品名称或 ID，仅搜索指定物品
* `p` 或 `player`：玩家 ID，仅搜索指定玩家
* `r` 或 `range`：搜索范围，仅搜索指定距离内有木牌的商店
* `a` 或 `advanced`：高级搜索选项：
  * `ench`：搜索包括附魔
    * `enchonly`：仅搜索附魔
    * `lore`：搜索包括描述
    * `loreonly`：仅包括描述 选项间用 `|` 并列，如 `ench|lore`

?> :heavy_check_mark: **以上参数组合范例**  
在所有木牌商店中，查找带有『经验修补』附魔的附魔书：  
`/heh search SILK_TOUCH i:enchanted_book a:ench`

若搜索结果多于 1 页，可使用 `/h search page [页码]` 命令翻页。

## 点对点交易

点对点交易是全新的交易模式。交易只有买卖双方参与，内容不会泄露给第三者，双方利益与隐私被全面保护。双方在任意时刻、地点皆可“面交”，大大提升便利性。

### 出售物品并发送账单

手持所售物品，使用命令 `/h sellto [玩家 ID] [总价]`，则将物品**全部**出售。  
或者，也可用快捷命令 `/hsellto [玩家 ID] [总价]`。

使用后，物品立即暂存于系统，并向目标玩家发送账单。

### 支付或取消账单

玩家在线时，如有新账单会立即在聊天栏提示，并附带唯一的“账单 ID”。  
按提示使用命令 `/h pay [账单 ID]` 即可**支付并收货**。短命令 `/hpay [账单 ID]` 亦可。  
每次支付加征 2% 消费税。

收到账单后可予以取消。只需使用命令 `/h cancel [账单 ID]`。  

!> 一个账单是任何玩家都可以支付的（包括卖家），只要知道它的 ID。
